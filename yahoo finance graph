import yfinance as yf
import matplotlib.pyplot as plt
import plotly.express as px
import pandas as pd
import plotly.graph_objects as go


pd.set_option('display.max_rows', None) #show all rows when print

stock="sbux"
cim= yf.Ticker(stock)
price= cim.history(period="max")
price.reset_index(inplace=True) #convert index into column

price= price.loc[price['Dividends'] !=0] #filter for dates w div pmt

#setup graph info
from plotly.subplots import make_subplots #to have multiple y axes
fig= make_subplots(specs=[[{"secondary_y": True}]]) #allow 2ndary axis
# Add figure title
fig.update_layout(title_text=stock)
# Set x-axis title
fig.update_xaxes(title_text="date")
# Set y-axes titles
fig.update_yaxes(title_text="div pmt", secondary_y=False)
fig.update_yaxes(title_text="div %", secondary_y=True)

fig.add_trace(go.Scatter(x=price['Date'], y= price['Dividends'], mode='lines+markers', name='div'), secondary_y=False)
fig.add_trace(go.Scatter(x=price['Date'], y= ((price['Dividends']*4)/ price['Close'])*100, mode='lines+markers', name='div %'), secondary_y=True)

fig.show()
